<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="dashboard.css">
    <title>Journizz</title>
    <meta charset="UTF-8">
    <script src="https://kit.fontawesome.com/be3f490722.js" crossorigin="anonymous"></script>
  </head>
  <body>
    <div class="mainpage">
      <aside class="sidebar">
        <div class="logo">
          <span  class="iconlogo">J</span>
          <span class="logoin">Journizz</span>
        </div>

        <div class="profilesection">
         <div class="profiletop">
          <div class="profilephoto">
            <img src="UserImages/sheldon2.jpeg" class="userimage"> 
          </div>
          <div class="username">
            <div class="name">
              Div
            </div>
            <div class="username1">
              @Div123
            </div>
          </div>
         </div>
        </div>

        <div class="sidebaroptions">
          <a class="home" href="extra.html">
            <div class="homeicon">
              <i class="fa-solid fa-house"></i> 
            </div>
            <div class="homename">
              Home
            </div>
          </a>

          <a class="calendar">
            <div class="calendaricon">
              <i class="fa-solid fa-calendar-week"></i>
            </div>

            <div class="calendarname">
              Calendar
            </div>
          </a>

          <a class="history" onclick="validate()">
            <div class="historyicon">
              <i class="fa-solid fa-folder"></i>
            </div>
            <div class="historyname">
              All Journals
            </div>
          </a>

          <a class="reminder">
            <div class="remindericon">
              <i class="fa-solid fa-clock"></i>
            </div>

            <div class="remindername">
              Reminders
            </div>
          </a>
        </div>

        <div class="logout">
          <div class="logouticon">
            <i class="fa-solid fa-right-from-bracket"></i>
          </div>

          <div class="logoutname">
            Logout
          </div>
        </div>

      </aside>
      
      <div class="main-content">
        <div class="navbar">
          <div class="twitterbutton">
            <button class="twitterbutton1"><i class="fa-brands fa-x-twitter"></i>Twitter</button>
          </div>

          <div class="githubbutton">
            <button class="githubbutton1"><i class="fa-brands fa-github"></i>Github</button>
          </div>
        </div>
      <div class="replaceall">
        <div class="dashboardgreeting">
          <div class="dash">
            Hi Div!
          </div>
          <div class="time">

          </div>
          <div class="greeting">
            Welcome back! Whats coming on the Journal today?
          </div>
        </div>


        <div class="Journalarea">
          <div class="userjournal">
              <div class="userjournaltop">
                <div class="journalbook">
                  <i class="fa-solid fa-book"></i>
                  <span class="journaldesc">New Journal</span> 
                </div>
                <div class="Addjournalbutton1outer">
                  <button class="Addjournalbutton1"><span class="plusicon">+</span>Add Journal</button>
                </div>
              </div>

              <div class="outerinputuserjournal">
                </i><textarea placeholder="Write your Journal here.... ✏️" class="inputuserjournal"></textarea>
              </div>

              <div class="userjournalbottom">
                <div class="outerjournalbottom1">
                  <a href="" class="geminilogo">
                    ✨ Gemini
                  </a>
                </div>
                <div class="outerjournalbottom2">
                  <div class="bookmark">
                    <a class="bookmarklink"><i class="fa-solid fa-bookmark"></i></a>
                  </div>
  
                  <div class="Addjournalbutton1outer">
                    <button class="Addjournalbutton1"><span class="plusicon">+</span>Add Journal</button>
                  </div>
                </div>
                
              </div>
          </div>

          <div class="geminisuggestions">
            <div class="geminitop">
              <div class="geminilogomain">
              ✨ Gemini 
              </div>
            </div>
          </i><textarea placeholder="Get your AI powered suggestions here....." class="geminimain"></textarea>

           <div class="geminibottom">
            <div class="replace">
              <a class="replacebutton"><i class="fa-solid fa-repeat"></i></a>
            </div>

            <div class="improvemore">
              <div class="checkicon">
                <i class="fa-solid fa-circle-check"></i>
              </div>
              <button class="improvemorebutton"><span class="chatbutton"><i class="fa-regular fa-comment-dots"></i></span>Improvise</button>
            </div>
           </div>

          </div>
        </div>
      </div>
      </div>
    </div>

    <script>
      //ab userdashboard pe aa chuka hai to aate vkt humne usse token to diya hi hai ab har 
      //subsequent request pe hum check krskte hai ki uska token valid hai ya nhi
      //agr req shi hai to usko uss page ka html bhejdo

      let url = "http://localhost:3000"
      async function validate(){
        try{
          const response = await fetch(`${url}/validate`,{
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              "authorization": localStorage.getItem("token")
            }
          })
          const data = await response.json()

          if(data.message === "Verified"){
            window.location.href = "/Public/alljournals.html"
          }
        }
        catch(e){

        }
      }
    </script>
  </body>
</html>